<template lang="pug">
  div
    .user-tasks(v-if="user && user.id")
      button(type="button", @click.prevent="$router.go(-1)") <<< Назад в список пользователей
      h1 {{user.name}}
      .user-tasks__tasks-list(v-if="user.tasks")
        button.user-tasks__add-button(type="button", @click.prevent="addTask(user.id)") Добавить...
        .user-tasks__task-item(v-for="task in user.tasks", :key="task.id",
          :class="task.completed ? 'user-tasks__task-item_completed' : ''")
          input(type="checkbox", v-model="task.completed")
          label(@click="task.completed = !task.completed") {{task.title}}
          span.user-tasks__trash-button(@click="deleteTask(task.id)") (X)

    div(v-else) Пользователь не найден!

</template>

<script>
export default {
  name: 'UserTasks',
  computed: {
    user() {
      return this.$store.getters.getUserById(+this.$route.params.id)
    }
  },
  methods: {
    deleteTask(id) {
      if (id) {
        const answer = confirm('Удалить задачу?')
        if (answer) {
          this.$store.dispatch('deleteTask', id)
        }
      }
    },
    addTask(userId) {
      const title = prompt('Укажите описание задачи')
      if (title) {
        this.$store.dispatch('addTask', {title, userId})
      }
    }
  }
}
</script>

<style lang="stylus">
  .user-tasks
    &__tasks-list
      text-align left
    &__task-item
      margin 3px 0
      padding 2px 0
      transition 300ms
      &:hover
        background-color lightgray
      label
        cursor: pointer
        margin-left 5px
      &_completed
        color grey
        text-decoration line-through
    &__trash-button
      margin-left 5px
      background-image url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgaGVpZ2h0PSIxMDAwIiB3aWR0aD0iMTAwMCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8bWV0YWRhdGE+SWNvRm9udCBJY29uczwvbWV0YWRhdGE+Cjx0aXRsZT51aS1kZWxldGU8L3RpdGxlPgo8Z2x5cGggZ2x5cGgtbmFtZT0idWktZGVsZXRlIiB1bmljb2RlPSImI3hlYzUzOyIgaG9yaXotYWR2LXg9IjEwMDAiIC8+CjxwYXRoIGQ9Ik03OTkuNyAyNzcuMmMtOTcuNDAwMDAwMDAwMDAwMDktMC41LTE5NC44MDAwMDAwMDAwMDAwNy0wLjA5OTk5OTk5OTk5OTk2NTktMjkyLjEtMC4wOTk5OTk5OTk5OTk5NjU5LTEwMyAwLTIwNi4xMDAwMDAwMDAwMDAwMi0wLjcwMDAwMDAwMDAwMDA0NTUtMzA5LjEgMC4zOTk5OTk5OTk5OTk5NzcyNi01MS40MDAwMDAwMDAwMDAwMDYgMC41LTYzLjU5OTk5OTk5OTk5OTk5NCAxNC01Ni42OTk5OTk5OTk5OTk5OSA2NC4xOTk5OTk5OTk5OTk5OSAyNy4xOTk5OTk5OTk5OTk5OSAxOTguMDk5OTk5OTk5OTk5OTcgNTUuNTk5OTk5OTk5OTk5OTk0IDM5Ni4wMDAwMDAwMDAwMDAwNiA4My42OTk5OTk5OTk5OTk5OSA1OTMuOTAwMDAwMDAwMDAwMSA3LjUgNTIuOTk5OTk5OTk5OTk5ODg2IDIwLjU5OTk5OTk5OTk5OTk5NCA2NC4xOTk5OTk5OTk5OTk4MiA3NC4xOTk5OTk5OTk5OTk5OSA2NC4yOTk5OTk5OTk5OTk4NCAxMzguMyAwLjIwMDAwMDAwMDAwMDA0NTQ3IDI3Ni41OTk5OTk5OTk5OTk5NyAwLjIwMDAwMDAwMDAwMDA0NTQ3IDQxNC45MDAwMDAwMDAwMDAwMyAwLjEwMDAwMDAwMDAwMDAyMjc0IDU5LjM5OTk5OTk5OTk5OTk4IDAgNzIuNzk5OTk5OTk5OTk5OTUtMTQuNzAwMDAwMDAwMDAwMDQ1IDc5Ljc5OTk5OTk5OTk5OTk1LTczLjIwMDAwMDAwMDAwMDA1IDIyLjYwMDAwMDAwMDAwMDAyMy0xOTAuMTk5OTk5OTk5OTk5OTMgNDYuMTAwMDAwMDAwMDAwMDItMzgwLjI5OTk5OTk5OTk5OTk1IDcwLjgwMDAwMDAwMDAwMDA3LTU3MC4xOTk5OTk5OTk5OTk5IDguNTk5OTk5OTk5OTk5OTA5LTY1LjcwMDAwMDAwMDAwMDA1IDAtNzktNjUuNS03OS40MDAwMDAwMDAwMDAwM3ogbS00NTMuNiA2MTguMmMtMzMuNjAwMDAwMDAwMDAwMDIgNC4wOTk5OTk5OTk5OTk5MDktNDYuMjAwMDAwMDAwMDAwMDQ1LTIyLjkwMDAwMDAwMDAwMDA5LTQ5LjYwMDAwMDAwMDAwMDAyLTUxLjMwMDAwMDAwMDAwMDA3LTE2LjMwMDAwMDAwMDAwMDAxLTEzNi44OTk5OTk5OTk5OTk5OC0zMS42MDAwMDAwMDAwMDAwMjMtMjc0LTQ3LjQwMDAwMDAwMDAwMDAwNi00MTAuOTAwMDAwMDAwMDAwMDMtMy4wOTk5OTk5OTk5OTk5OTQzLTI3LjE5OTk5OTk5OTk5OTk5IDQuOTAwMDAwMDAwMDAwMDA2LTUwLjE5OTk5OTk5OTk5OTk5IDMzLjIwMDAwMDAwMDAwMDAyLTU0Ljg5OTk5OTk5OTk5OTk4IDMxLjE5OTk5OTk5OTk5OTk5LTUuMTk5OTk5OTk5OTk5OTg5IDQ2LjM5OTk5OTk5OTk5OTk4IDE3IDUwLjA5OTk5OTk5OTk5OTk2NiA0NC42OTk5OTk5OTk5OTk5OSAxMC43MDAwMDAwMDAwMDAwNDUgODAuODk5OTk5OTk5OTk5OTggMjAgMTYyIDI5LjYwMDAwMDAwMDAwMDAyMyAyNDMgNi42MDAwMDAwMDAwMDAwMjMgNTUuODk5OTk5OTk5OTk5OTggMTIuODk5OTk5OTk5OTk5OTc3IDExMS43OTk5OTk5OTk5OTk5NSAxOS4zMDAwMDAwMDAwMDAwMSAxNjcuNzAwMDAwMDAwMDAwMDUgMyAyOS4zOTk5OTk5OTk5OTk5NzctMS4xOTk5OTk5OTk5OTk5ODg2IDU3LjU5OTk5OTk5OTk5OTkxLTM1LjE5OTk5OTk5OTk5OTk5IDYxLjY5OTk5OTk5OTk5OTkzeiBtMjAwLjg5OTk5OTk5OTk5OTk4LTUxLjcwMDAwMDAwMDAwMDA0NWMtMC4xMDAwMDAwMDAwMDAwMjI3NCAyNy44OTk5OTk5OTk5OTk5NzctMTEuNzAwMDAwMDAwMDAwMDQ1IDUzLjE5OTk5OTk5OTk5OTkzLTQyLjM5OTk5OTk5OTk5OTk4IDUyLjY5OTk5OTk5OTk5OTkzLTMzLTAuNjAwMDAwMDAwMDAwMDIyNy00Mi0yNi41LTQxLjcwMDAwMDAwMDAwMDA0NS01Ni43OTk5OTk5OTk5OTk5NTUgMC43MDAwMDAwMDAwMDAwNDU1LTY3LjUgMC4yMDAwMDAwMDAwMDAwNDU0Ny0xMzUuMTAwMDAwMDAwMDAwMDIgMC4yMDAwMDAwMDAwMDAwNDU0Ny0yMDIuNjAwMDAwMDAwMDAwMDJoLTAuNzAwMDAwMDAwMDAwMDQ1NWMwLTY3LjUgMC4zMDAwMDAwMDAwMDAwMTEzNy0xMzUuMTAwMDAwMDAwMDAwMDItMC4wOTk5OTk5OTk5OTk5NjU5LTIwMi42MDAwMDAwMDAwMDAwMi0wLjE5OTk5OTk5OTk5OTk4ODYzLTI5IDQuODAwMDAwMDAwMDAwMDExLTU3LjA5OTk5OTk5OTk5OTk2NiAzOS4wOTk5OTk5OTk5OTk5NjYtNTguODk5OTk5OTk5OTk5OTggMzQuNS0xLjgwMDAwMDAwMDAwMDAxMTQgNDQuNSAyNS44OTk5OTk5OTk5OTk5NzcgNDQuNzAwMDAwMDAwMDAwMDQ1IDU0LjYwMDAwMDAwMDAwMDAyIDEuMTAwMDAwMDAwMDAwMDIyNyAxMzcuNzk5OTk5OTk5OTk5OTUgMS4xOTk5OTk5OTk5OTk5MzE4IDI3NS42OTk5OTk5OTk5OTk5MyAwLjg5OTk5OTk5OTk5OTk3NzMgNDEzLjZ6IG0yMTYuODk5OTk5OTk5OTk5OTgtNDA2LjcwMDAwMDAwMDAwMDA1Yy0xNi41IDEzNi44OTk5OTk5OTk5OTk5OC0zMy43OTk5OTk5OTk5OTk5NTUgMjczLjYtNTEuNSA0MTAuNC0zLjYwMDAwMDAwMDAwMDAyMjcgMjcuNjAwMDAwMDAwMDAwMDIzLTE4LjI5OTk5OTk5OTk5OTk1NSA1MS4zMDAwMDAwMDAwMDAwNy00OC42OTk5OTk5OTk5OTk5MyA0Ni44OTk5OTk5OTk5OTk5OC0zMi43MDAwMDAwMDAwMDAwNDUtNC43OTk5OTk5OTk5OTk5NTQ1LTM4LjMwMDAwMDAwMDAwMDA3LTMxLjU5OTk5OTk5OTk5OTkxLTM0LjIwMDAwMDAwMDAwMDA0NS02MS41OTk5OTk5OTk5OTk5MSA5LjIwMDAwMDAwMDAwMDA0NS02Ni45MDAwMDAwMDAwMDAwOSAxNi42MDAwMDAwMDAwMDAwMjMtMTM0IDI1LjIwMDAwMDAwMDAwMDA0NS0yMDFzMTcuMzk5OTk5OTk5OTk5OTc3LTEzMy45MDAwMDAwMDAwMDAwMyAyNS41LTIwMS4wMDAwMDAwMDAwMDAwNmMzLjUtMjguODAwMDAwMDAwMDAwMDEgMTItNTYgNDYuMjk5OTk5OTk5OTk5OTU1LTUzLjUgMzQuMzk5OTk5OTk5OTk5OTggMi41IDQwLjc5OTk5OTk5OTk5OTk1NSAzMS4zMDAwMDAwMDAwMDAwMSAzNy4zOTk5OTk5OTk5OTk5OCA1OS44MDAwMDAwMDAwMDAwMXogbS0zMzkuNC0zNTAuNWMxNi44MDAwMDAwMDAwMDAwMS04My45IDI1LjUtOTIuNiA4MS44MDAwMDAwMDAwMDAwMS04My44IDk1LjgwMDAwMDAwMDAwMDAxIDE0Ljk5OTk5OTk5OTk5OTk5NiA5OC4zMDAwMDAwMDAwMDAwMSAxOC4wOTk5OTk5OTk5OTk5OTggODUuODAwMDAwMDAwMDAwMDEgMTExLjM5OTk5OTk5OTk5OTk5IDc0IDEzLjEwMDAwMDAwMDAwMDAwOSAxNDguMTAwMDAwMDAwMDAwMDIgMjcuMzAwMDAwMDAwMDAwMDEgMjIyLjYwMDAwMDAwMDAwMDAyIDM5IDMyLjI5OTk5OTk5OTk5OTk1NSA1LjA5OTk5OTk5OTk5OTk5NCA2MS4yOTk5OTk5OTk5OTk5NTUgMTIuNTk5OTk5OTk5OTk5OTk0IDU1Ljc5OTk5OTk5OTk5OTk1NSA1Mi41OTk5OTk5OTk5OTk5OTQtNS44OTk5OTk5OTk5OTk5NzcgNDIuODAwMDAwMDAwMDAwMDEtNDAuNjAwMDAwMDAwMDAwMDIgMzYuOTAwMDAwMDAwMDAwMDA2LTY5LjYwMDAwMDAwMDAwMDAyIDMyLjEwMDAwMDAwMDAwMDAyLTE3Mi0yOC44MDAwMDAwMDAwMDAwMS0zNDMuOS01OC44MDAwMDAwMDAwMDAwMS01MTUuOC04OC40LTM3LjQwMDAwMDAwMDAwMDAzNC02LjUtNzQuNzAwMDAwMDAwMDAwMDItMTQtMTEyLjMwMDAwMDAwMDAwMDAxLTE5LjU5OTk5OTk5OTk5OTk5NC0zMC4yMDAwMDAwMDAwMDAwMTctNC41MDAwMDAwMDAwMDAwMTQtNDcuNjAwMDAwMDAwMDAwMDEtMjAuMjAwMDAwMDAwMDAwMDE3LTQyLjQwMDAwMDAwMDAwMDAwNi01MC45MDAwMDAwMDAwMDAwMDYgNS40MDAwMDAwMDAwMDAwMDYtMzEuNTAwMDAwMDAwMDAwMDA3IDI5LjUtMzguNjAwMDAwMDAwMDAwMDEgNTcuOTAwMDAwMDAwMDAwMDA2LTMzLjcgNzguODAwMDAwMDAwMDAwMDEgMTMuNSAxNTcuNSAyNy41IDIzNi4yIDQxLjN6Ii8+Cjwvc3ZnPg==')
      font-size 0
      width 20px
      height 20px
      background-size contain
      float right
      cursor pointer
    &__add-button
      margin-bottom 10px
</style>
